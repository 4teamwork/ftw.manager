#!/usr/bin/python
"""Generates the README.rst based on the long_description of
the setup.py including the docstrings of the commands.

"""
from distutils.core import run_setup
import os

if __name__ == '__main__':
    root_dir = os.path.abspath(os.path.join(
            os.path.dirname(__file__), '..'))
    # chdir to root dir
    os.chdir(root_dir)
    # get description
    egg = run_setup('setup.py')
    description = egg.get_long_description()
    # write to README.rst
    file_ = open('README.rst', 'w')
    file_.write(description)
    file_.close()
    print 'wrote README.rst'
